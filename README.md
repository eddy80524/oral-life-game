# お口の人生ゲーム - デジタル版

スマートフォン・PCブラウザで楽しめる歯科保健教育ゲームアプリです。

## 🎯 概要

子ども（5歳〜）と保護者が楽しみながら、サイコロを振って進むボードゲームで虫歯・歯周病予防を学習するゲームです。
各マスでクイズや体験イベントを通じて、トゥースコインを獲得し、歯科保健について楽しく学べます。

## 🛠️ 技術スタック

- **言語**: Python 3.10+
- **フレームワーク**: Streamlit
- **主要ライブラリ**:
  - streamlit (Webアプリフレームワーク)
  - pandas, numpy (データ処理)
- **データ保存**: ローカルJSON
- **デプロイ**: Streamlit Cloud

## 📁 プロジェクト構成

```
oral_life_game/
├── app.py                      # メインアプリケーション
├── requirements.txt            # 依存関係
├── data/                       # ゲームデータ
│   ├── board_main_5plus.json   # 5歳以上用ボード
│   ├── board_main_under5.json  # 5歳未満用ボード
│   ├── participants.json       # 参加者データ
│   ├── leaderboard.json        # ランキングデータ
│   └── settings.json           # アプリ設定
├── assets/                     # 静的アセット
│   └── images/                 # 画像ファイル
│       ├── board/              # ボード画像
│       ├── quiz/               # クイズ画像
│       └── events/             # イベント画像
├── services/                   # サービスモジュール
│   ├── game_logic.py           # ゲームロジック
│   ├── image_helper.py         # 画像表示ヘルパー
│   └── store.py                # データ保存
└── pages/                      # 追加ページ
    ├── 1_ゲームボード.py        # ゲームボード(未使用)
    ├── 5_定期健診.py            # 定期健診(未使用)
    └── 10_画像テスト.py         # 画像テスト
```

## 🚀 セットアップと起動

### 1. リポジトリのクローン
```bash
git clone <repository-url>
cd oral_life_game
```

### 2. 依存関係のインストール
```bash
pip install -r requirements.txt
```

### 3. アプリケーションの起動
```bash
streamlit run app.py
```

### 4. ブラウザでアクセス
```
http://localhost:8501
```

## 🎮 ゲームフロー

1. **受付・参加者登録** - 名前、年齢を入力してゲーム開始
2. **ゲームボード** - サイコロを振って24マスのボードを進行
3. **マスイベント** - 各マスで以下の体験:
   - 虫歯クイズ (食べ物・飲み物の組み合わせ選択)
   - 歯周病クイズ (歯茎の健康について)
   - 定期検診 (フッ素塗布でトゥースコイン獲得)
   - 職業体験 (歯科関連職業を学習)
   - ライフイベント (成長過程での出来事)
4. **トゥースコイン** - マス移動でコインが増減
5. **ゴール・ランキング** - 最終結果とLINE公式アカウント案内

## 🎲 ゲーム機能

### サイコロシステム
- 1-6の目でマスを進行
- 特別マス(検診・職業体験)への誘導機能
- 結果表示後3秒で自動遷移

### トゥースコインシステム
- 各マスで設定された増減値でコイン更新
- リアルタイムでUI上に反映
- ゲーム終了時の最終スコア表示

##  スタッフ管理

PIN: `0418` でスタッフ管理画面にアクセス
- 参加者統計表示
- データリセット機能
- 年齢別ボード設定切替

## 📊 データ管理

### ローカル保存
- `data/participants.json` - 参加者統計
- `data/leaderboard.json` - ランキングデータ  
- `data/settings.json` - アプリ設定
- `data/board_main_*.json` - ボード構成データ

### セッション管理
- Streamlitセッション状態でゲーム進行管理
- 参加者情報・ゲーム状態の保持
- リアルタイムUI更新

## 🎨 カスタマイズ

### ボードの変更
`data/board_main_*.json` を編集してマス構成を変更
- `cell`: マス番号
- `type`: マスタイプ (normal/quiz/stop/event)
- `title`: マスタイトル
- `tooth_delta`: トゥースコイン増減値

### 画像の追加
1. `assets/images/` の適切なフォルダに画像を配置
2. `image_helper.py` が自動で複数拡張子(.png, .jpg, .jpeg)を検索

### LINE連携
- ゴールページとLINEページでLINE公式アカウントへリンク
- URL: `https://line.me/R/ti/p/@551bgrrd`

## 🐛 トラブルシューティング

### 画像が表示されない
- `assets/images/` 内のファイル存在確認
- Streamlitバージョンによる互換性問題の確認

### データが保存されない
- ファイル書き込み権限の確認
- `data/` ディレクトリの存在確認

### サイコロが動作しない
- ブラウザの JavaScript 有効化確認
- ページの再読み込み

## 📝 実装済み機能

- ✅ サイコロによるボード進行
- ✅ トゥースコイン自動更新システム
- ✅ 虫歯・歯周病クイズ
- ✅ 職業体験（5歳以上）
- ✅ LINE公式アカウント連携
- ✅ スタッフ管理機能
- ✅ 年齢別ボード切り替え
- ✅ Streamlit Cloud デプロイ対応

## 🚧 未実装・削除された機能

- ❌ QRコードスキャン機能
- ❌ 音声ガイド機能  
- ❌ Firebase連携
- ❌ カメラ機能

## � デプロイ情報

**Streamlit Cloud デプロイ済み**
- Repository: `eddy80524/oral-life-game`
- Branch: `main`
- Main file: `app.py`

## �📄 ライセンス

このプロジェクトは教育目的で作成されています。

## 👥 貢献

プルリクエストや課題報告をお待ちしています。

---

**お口の人生ゲーム** - 楽しく学ぶ歯科保健教育  
デジタルボードゲームで歯の健康について学ぼう！
